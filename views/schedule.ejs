<!DOCTYPE html>
<html>
<head>
  <% include ./include/meta.ejs %>
  <% include ./include/common.ejs %>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <style>
    body{
      color:black;
    }
    .schedule-bar h1{
      text-align: left;
      font-weight: bold;
    }
    .schedule-bar img{
      position: absolute;
      bottom: 13%;
      margin-left: 89%;
    }
    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        text-align: center;
        width : 100px;
        height: 40px;
    }
    th, td {
        padding: 20px;
    }
    th {
        text-align: center;
    }
    .add-friend-bar{
      border: 1px solid rgb(252, 255, 141);
      margin-top: 5%; 
      background-color: rgb(252, 255, 141); 
      border-radius: 5%;
    }
    .add-friend-bar h2{
      text-align: center;
      font-size: 1.5rem;
      padding: 1.5% 0%;
    }
    .add-friend-bar img{
      position: absolute;
      bottom: 28%;
      margin-left: 86%;
    }
    .footer{
      border: 1px solid rgb(254, 255, 198);
      background-color: rgb(254, 255, 198);
      border-radius: 5%;
      padding: 1%;
    }
    .footer img{
      display: initial;
      margin: 0% 5%;
    }

    .dropDown {position:relative; display:inline-block; *display:inline; *zoom:1;}
    .btn_drop {background:#767676; color:#fff; padding:5px 10px; border-radius:5px;}
    .dropBox {position:absolute; z-index:1; height:0; overflow:hidden; width:150px;}
    .dropBox.on {height:auto; padding:10px 0; border:1px solid #ddd; background:#fff;}
    .dropBox ul li:hover,
    .dropBox ul li.on {background:#eee;}
    .btn_close {display:block; height:0; overflow:hidden;}
    .name p{
      color:black;
    }
    .sche-time p{
      color:black;
    }
    .week{
      margin: 5% 0%;
    }
    .sche-delete-btn button{
      width: 100%;
      margin-top: 23%;
    }
    .sche-save-btn button{
      width: 100%;
      margin-top: 23%;
    }
    #opener{
      background: white;
      border: 0px;
}
    </style>
    
    
</head>
<body class="hold-transition sidebar-mini layout-fixed">
  <div class="wrapper">
    <% include ./include/sidebar.ejs %>
    <div class="container-fulid">
      <div class="col-md-12 schedule-bar">
        <h1>시간표</h1>
        <button id="opener"><img src="./dist/img/add-schedule.png"/></button>
      </div>

      <div id="dialog" title="수업 추가">
        <div class="col-md-12 text-left name">
          <p>수업명: <input type="수업명"/></p>
          <p>교수명: <input type="수업명"/></p>
          <p>장소: <input type="수업명"/></p>
        </div>
        <div class="col-md-6 week">
          <div class="dropDown">
            <a class="btn_drop">요일</a>
              <div class="dropBox">
                  <ul>
                      <li><a>월요일</a></li>
                      <li><a>화요일</a></li>
                      <li><a>수요일</a></li>
                      <li><a>목요일</a></li>
                      <li><a>금요일</a></li>
                      <li><a>토요일</a></li>
                      <li><a>일요일</a></li>

                  </ul>
                  <a class="btn_close">닫기</a>
              </div>
          </div>
        </div>
        <div class="col-md-12 sche-time">
          <p>시간 : </p>
          <input type='time'/>
        </div>
        <div class="row">
          <div class="col-md-6 text-center sche-delete-btn">
            <button>삭제</button>
          </div>
          <div class="col-md-6 text-center sche-save-btn">
            <button>추가</button>
          </div>
        </div>
      </div>
       
      
        <table style="width:100%">
          <tr>
            <th> </th>
            <th>월</th>
            <th>화</th>
            <th>수</th>
            <th>목</th>
            <th>금</th>
            <th>토</th>
            <th>일</th>
          </tr>
            <tr>
            <th>9</th>
            <td name="mon-9" id="mon-9" style="background : rgb(209, 214, 255);">학교온라인 수업</td>
            <td name="tue-9" id="tue-9">학교온라인 수업</td>
            <td name="wed-9" id="wed-9">학교온라인 수업</td>
            <td name="thu-9" id="thu-9">학교온라인 수업</td>
            <td name="fri-9" id="fri-9">학교온라인 수업</td>
            <td name="sat-9" id="sat-9"></td>
            <td name="sun-9" id="sun-9"></td>
          </tr>
            <tr>
            <th>10</th>
            <td name="mon-10" id="mon-10"> </td>
            <td name="tue-10" id="tue-10"> </td>
            <td name="wed-10" id="wed-10"> </td>
            <td name="thu-10" id="thu-10"> </td>
            <td name="fri-10" id="fri-10"> </td>
            <td name="sat-10" id="sat-10"> </td>
            <td name="sun-10" id="sun-10"> </td>
          </tr>
            <tr>
            <th>11</th>
            <td name="mon-11" id="mon-11"> </td>
            <td name="tue-11" id="tue-11"> </td>
            <td name="wed-11" id="wed-11"> </td>
            <td name="thu-11" id="thu-11"> </td>
            <td name="fri-11" id="fri-11"> </td>
            <td name="sat-11" id="sat-11"> </td>
            <td name="sun-11" id="sun-11"> </td>
          </tr>
          <tr>
            <th>12</th>
            <td name="mon-12" id="mon-12"> </td>
            <td name="tue-12" id="tue-12"> </td>
            <td name="wed-12" id="wed-12"> </td>
            <td name="thu-12" id="thu-12"> </td>
            <td name="fri-12" id="fri-12"> </td>
            <td name="sat-12" id="sat-12"> </td>
            <td name="sun-12" id="sun-12"> </td>
          </tr>
          <tr>
            <th>13</th>
            <td name="mon-13" id="mon-13"> </td>
            <td name="tue-13" id="tue-13"> </td>
            <td name="wed-13" id="wed-13"> </td>
            <td name="thu-13" id="thu-13" style = "background : rgb(251, 230, 244);">수학학원</td>
            <td name="fri-13" id="fri-13"> </td>
            <td name="sat-13" id="sat-13"> </td>
            <td name="sun-13" id="sun-13"> </td>
          </tr>
          <tr>
            <th>14</th>
            <td name="mon-14" id="mon-14"> </td>
            <td name="tue-14" id="tue-14" style = "background : rgb(251, 230, 244);">수학학원</td>
            <td name="wed-14" id="wed-14"> </td>
            <td name="thu-14" id="thu-14"> </td>
            <td name="fri-14" id="fri-14"> </td>
            <td name="sat-14" id="sat-14"> </td>
            <td name="sun-14" id="sun-14"> </td>
          </tr>
          <tr>
            <th>15</th>
            <td name="mon-15" id="mon-15"> </td>
            <td name="tue-15" id="tue-15" style = "background : rgb(251, 230, 244);">영어학원</td>
            <td name="wed-15" id="wed-15"> </td>
            <td name="thu-15" id="thu-15"> </td>
            <td name="fri-15" id="fri-15"> </td>
            <td name="sat-15" id="sat-15"> </td>
            <td name="sun-15" id="sun-15"> </td>
          </tr>
          <tr>
            <th>16</th>
            <td name="mon-16" id="mon-16" style = "background : rgb(251, 230, 244);">영어학원</td>
            <td name="tue-16" id="tue-16"> </td>
            <td name="wed-16" id="wed-16"> </td>
            <td name="thu-16" id="thu-16"> </td>
            <td name="fri-16" id="fri-16"> </td>
            <td name="sat-16" id="sat-16"> </td>
            <td name="sun-16" id="sun-16"> </td>
          </tr>
        </table>
      </div>
    </div>
    <div class="wrapper">
      <div class="container-fulid">
        <div class="row">
          <div class="col-md-12 add-friend-bar">
            <h2>친구추가</h2>
            <img src="./dist/img/add-friend.png" name="add-friend" id="add-friend"/>
          </div>
          <div class="col-md-12" name="friends" id="friends" style="padding: 3%;">
            <ul>
              <li>홍길동</li>
              <li>홍길순</li>
              <li>서주영</li>
              <li>김수림</li>
            </ul>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 footer">
        </div>
      </div>
    </div>
  </div>
          
<% include ./include/script.ejs %>
</body>
<script>
  $( function() {
    $( "#dialog" ).dialog({
      autoOpen: false,
      show: {
        effect: "blind",
        duration: 1000
      },
      hide: {
        effect: "",
        duration: 500
      }
    });
 
    $( "#opener" ).on( "click", function() {
      $( "#dialog" ).dialog( "open" );
      });
    } );

    $( ".btn_drop" ).click(function() {
      $(this).next().toggleClass("on");
      return false;
    });
    $( ".btn_save,.btn_close,.btn_close_check" ).click(function() {
        $(this).parent().removeClass("on");
        return false;
    });
    $( ".dropBox ul li a" ).click(function() {
        $(this).parent().parent().parent().removeClass("on").prev(".btn_drop").text($(this).text());
        return false;
    });
    $(".dropBox ul li.check_all label").click(function() {
      if($(this).children("input").is(":checked")) {
            $(this).parent().siblings("li").addClass("on").find("input").prop("checked", true);
        }
        else {
          $(this).parent().siblings("li").removeClass("on").find("input[type=checkbox]").prop("checked", false);
      }
    });
  $( ".btn_save,.btn_close_check" ).click(function() {
      if($(this).siblings("ul").find("li.check_all").children().children("input").is(":checked")) {
          $(this).parent().prev(".btn_drop").text("All");
      }
      else {
          var input_checked = $(this).siblings("ul").find("input:checked");
          if((input_checked.size()) > 1){
              $(this).parent().prev(".btn_drop").text(input_checked.first().parent().text()+" 외"+(input_checked.size()-1));
          }
          else if(($(this).siblings("ul").find("input:checked").size()) == 1){
              $(this).parent().prev(".btn_drop").text(input_checked.first().parent().text());
          }
          else {
              $(this).parent().prev(".btn_drop").text("Select(Checkbox)");
          }
      }
      return false;
  });




   //팝업창 반응형
    $(window).resize(function () {
        fluidDialog();
        $("#dialog").dialog("option", "position", {my: "center", at: "center", of: window});
    });

    function fluidDialog() {
        var $visible = $(".ui-dialog:visible");
        // each open dialog
        $visible.each(function () {
            var $this = $(this);
            var dialog = $this.find(".ui-dialog-content").data("ui-dialog");
            // if fluid option == true
            if (dialog.options.fluid) {
                var wWidth = $(window).width();
                // check window width against dialog width
                if (wWidth < (parseInt(dialog.options.maxWidth) + 50))  {
                    // keep dialog from filling entire screen
                    $this.css("max-width", "90%");
                } else {
                    // fix maxWidth bug
                    $this.css("max-width", dialog.options.maxWidth + "px");
                }
                //reposition dialog
                dialog.option("position", dialog.options.position);
            }
        });

    }
  </script>
</html>